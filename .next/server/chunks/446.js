exports.id=446,exports.ids=[446],exports.modules={7497:(e,a,t)=>{Promise.resolve().then(t.bind(t,57849))},57849:(e,a,t)=>{"use strict";t.d(a,{default:()=>Q});var s=t(10326),r=t(74064),l=t(74723),i=t(27256),d=t(17577),o=t(27950),n=t(941),c=t(96633),m=t(32933),f=t(77863);let p=o.fC;o.ZA;let u=o.B4,h=d.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(o.xz,{ref:r,className:(0,f.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[a,s.jsx(o.JO,{asChild:!0,children:s.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=o.xz.displayName;let x=d.forwardRef(({className:e,...a},t)=>s.jsx(o.u_,{ref:t,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(c.Z,{className:"h-4 w-4"})}));x.displayName=o.u_.displayName;let g=d.forwardRef(({className:e,...a},t)=>s.jsx(o.$G,{ref:t,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(n.Z,{className:"h-4 w-4"})}));g.displayName=o.$G.displayName;let b=d.forwardRef(({className:e,children:a,position:t="popper",...r},l)=>s.jsx(o.h_,{children:(0,s.jsxs)(o.VY,{ref:l,className:(0,f.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[s.jsx(x,{}),s.jsx(o.l_,{className:(0,f.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),s.jsx(g,{})]})}));b.displayName=o.VY.displayName,d.forwardRef(({className:e,...a},t)=>s.jsx(o.__,{ref:t,className:(0,f.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=o.__.displayName;let j=d.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(o.ck,{ref:r,className:(0,f.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(o.wU,{children:s.jsx(m.Z,{className:"h-4 w-4"})})}),s.jsx(o.eT,{children:a})]}));j.displayName=o.ck.displayName,d.forwardRef(({className:e,...a},t)=>s.jsx(o.Z0,{ref:t,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=o.Z0.displayName;var N=t(90772),w=t(34214),y=t(34478);let v=(0,t(28671).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=d.forwardRef(({className:e,...a},t)=>s.jsx(y.f,{ref:t,className:(0,f.cn)(v(),e),...a}));R.displayName=y.f.displayName;let I=l.RV,k=d.createContext({}),S=({...e})=>s.jsx(k.Provider,{value:{name:e.name},children:s.jsx(l.Qr,{...e})}),C=()=>{let e=d.useContext(k),a=d.useContext($),{getFieldState:t,formState:s}=(0,l.Gc)(),r=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=a;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...r}},$=d.createContext({}),z=d.forwardRef(({className:e,...a},t)=>{let r=d.useId();return s.jsx($.Provider,{value:{id:r},children:s.jsx("div",{ref:t,className:(0,f.cn)("space-y-2",e),...a})})});z.displayName="FormItem";let O=d.forwardRef(({className:e,...a},t)=>{let{error:r,formItemId:l}=C();return s.jsx(R,{ref:t,className:(0,f.cn)(r&&"text-destructive",e),htmlFor:l,...a})});O.displayName="FormLabel";let _=d.forwardRef(({...e},a)=>{let{error:t,formItemId:r,formDescriptionId:l,formMessageId:i}=C();return s.jsx(w.g7,{ref:a,id:r,"aria-describedby":t?`${l} ${i}`:`${l}`,"aria-invalid":!!t,...e})});_.displayName="FormControl",d.forwardRef(({className:e,...a},t)=>{let{formDescriptionId:r}=C();return s.jsx("p",{ref:t,id:r,className:(0,f.cn)("text-sm text-muted-foreground",e),...a})}).displayName="FormDescription";let U=d.forwardRef(({className:e,children:a,...t},r)=>{let{error:l,formMessageId:i}=C(),d=l?String(l?.message):a;return d?s.jsx("p",{ref:r,id:i,className:(0,f.cn)("text-sm font-medium text-destructive",e),...t,children:d}):null});U.displayName="FormMessage";var F=t(54432),T=t(58464);let Z=({control:e,render:a,name:t,formLabel:r,className:l})=>s.jsx(S,{control:e,name:t,render:({field:e})=>(0,s.jsxs)(z,{className:l,children:[r&&s.jsx(O,{children:r}),s.jsx(_,{children:a({field:e})}),s.jsx(U,{})]})});var A=t(94215),D=t(3870),L=t(46226);let V=({onValueChange:e,setImage:a,image:t,publicId:r,type:l})=>{let{toast:i}=(0,A.pm)();return s.jsx(D.ZF,{uploadPreset:"jsm_imaginify",options:{multiple:!1,resourceType:"image"},onSuccess:t=>{a(e=>({...e,publicId:t?.info?.public_id,width:t?.info?.width,height:t?.info?.height,secureURL:t?.info?.secure_url})),e(t?.info?.public_id),i({title:"Image uploaded successfully",description:"1 credit was deducted from your account",duration:5e3,className:"success-toast"})},onError:()=>{i({title:"Something went wrong while uploading",description:"Please try again",duration:5e3,className:"error-toast"})},children:({open:e})=>(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[s.jsx("h3",{className:"h3-bold text-dark-600",children:"Original"}),r?s.jsx(s.Fragment,{children:s.jsx("div",{className:"cursor-pointer overflow-hidden rounded-[10px]",children:s.jsx(D.bz,{width:(0,f.Ad)(l,t,"width"),height:(0,f.Ad)(l,t,"height"),src:r,alt:"image",sizes:"(max-width: 767px) 100vw, 50vw",placeholder:f.c8,className:"media-uploader_cldImage"})})}):(0,s.jsxs)("div",{className:"media-uploader_cta",onClick:()=>e(),children:[s.jsx("div",{className:"media-uploader_cta-image",children:s.jsx(L.default,{src:"/assets/icons/add.svg",alt:"Add Image",width:24,height:24})}),s.jsx("p",{className:"p-14-medium",children:"Click here to upload image"})]})]})})};var P=t(63413);t(15424);var J=t(46242),E=(0,J.$)("b2a90d281b61f0fd63dfa5008fbcac295a6ae37e");(0,J.$)("15b7832004d701c5edee6144e0c0c9d9747cc984"),(0,J.$)("2bfdc0e17c58ceb98c26f4cd1b2677c7816e8b39"),(0,J.$)("1d575876d1821b9744f489231b3e5c1c6be08015"),(0,J.$)("6211d5ae95a8c8bbe21c848c64603161c69b5fa8");var Y=t(32728),B=t(35047),M=t(99440);let G=()=>{let e=(0,B.useRouter)();return s.jsx(M.aR,{defaultOpen:!0,children:(0,s.jsxs)(M._T,{children:[(0,s.jsxs)(M.fY,{children:[(0,s.jsxs)("div",{className:"flex-between",children:[s.jsx("p",{className:"p-16-semibold text-dark-400",children:"Insufficient Credits"}),s.jsx(M.le,{className:"border-0 p-0 hover:bg-transparent",onClick:()=>e.push("/profile"),children:s.jsx(L.default,{src:"/assets/icons/close.svg",alt:"credit coins",width:24,height:24,className:"cursor-pointer"})})]}),s.jsx(L.default,{src:"/assets/images/stacked-coins.png",alt:"credit coins",width:462,height:122}),s.jsx(M.f$,{className:"p-24-bold text-dark-600",children:"Oops.... Looks like you've run out of free credits!"}),s.jsx(M.yT,{className:"p-16-regular py-3",children:"No worries, though - you can keep enjoying our services by grabbing more credits."})]}),(0,s.jsxs)(M.xo,{children:[s.jsx(M.le,{className:"button w-full bg-purple-100 text-dark-400",onClick:()=>e.push("/profile"),children:"No, Cancel"}),s.jsx(M.OL,{className:"button w-full bg-purple-gradient  bg-cover",onClick:()=>e.push("/credits"),children:"Yes, Proceed"})]})]})})},H=i.z.object({title:i.z.string(),aspectRatio:i.z.string().optional(),color:i.z.string().optional(),prompt:i.z.string().optional(),publicId:i.z.string()}),Q=({action:e,data:a=null,userId:t,type:i,creditBalance:o,config:n=null})=>{let c=T.vB[i],[m,x]=(0,d.useState)(a),[g,w]=(0,d.useState)(null),[y,v]=(0,d.useState)(!1),[R,k]=(0,d.useState)(!1),[S,C]=(0,d.useState)(n),[$,z]=(0,d.useTransition)(),O=(0,B.useRouter)(),_=a&&"Update"===e?{title:a?.title,aspectRatio:a?.aspectRatio,color:a?.color,prompt:a?.prompt,publicId:a?.publicId}:T.Pg,U=(0,l.cI)({resolver:(0,r.F)(H),defaultValues:_});async function A(s){if(v(!0),a||m){let r=(0,D.oy)({width:m?.width,height:m?.height,src:m?.publicId,...S}),l={title:s.title,publicId:m?.publicId,transformationType:i,width:m?.width,height:m?.height,config:S,secureURL:m?.secureURL,transformationURL:r,aspectRatio:s.aspectRatio,prompt:s.prompt,color:s.color};if("Add"===e)try{let e=await (0,Y.mN)({image:l,userId:t,path:"/"});e&&(U.reset(),x(a),O.push(`/transformations/${e._id}`))}catch(e){console.log(e)}if("Update"===e)try{let e=await (0,Y.gO)({image:{...l,_id:a._id},userId:t,path:`/transformations/${a._id}`});e&&O.push(`/transformations/${e._id}`)}catch(e){console.log(e)}}v(!1)}let L=(e,a)=>{let t=T.V3[e];return x(e=>({...e,aspectRatio:t.aspectRatio,width:t.width,height:t.height})),w(c.config),a(e)},J=(e,a,t,s)=>((0,f.Ds)(()=>{w(s=>({...s,[t]:{...s?.[t],["prompt"===e?"prompt":"to"]:a}}))},1e3)(),s(a)),M=async()=>{k(!0),C((0,f.ho)(g,S)),w(null),z(async()=>{await E(t,T.Mg)})};return(0,d.useEffect)(()=>{m&&("restore"===i||"removeBackground"===i)&&w(c.config)},[m,c.config,i]),s.jsx(I,{...U,children:(0,s.jsxs)("form",{onSubmit:U.handleSubmit(A),className:"space-y-8",children:[o<Math.abs(T.Mg)&&s.jsx(G,{}),s.jsx(Z,{control:U.control,name:"title",formLabel:"Image Title",className:"w-full",render:({field:e})=>s.jsx(F.I,{...e,className:"input-field"})}),"fill"===i&&s.jsx(Z,{control:U.control,name:"aspectRatio",formLabel:"Aspect Ratio",className:"w-full",render:({field:e})=>(0,s.jsxs)(p,{onValueChange:a=>L(a,e.onChange),value:e.value,children:[s.jsx(h,{className:"select-field",children:s.jsx(u,{placeholder:"Select size"})}),s.jsx(b,{children:Object.keys(T.V3).map(e=>s.jsx(j,{value:e,className:"select-item",children:T.V3[e].label},e))})]})}),("remove"===i||"recolor"===i)&&(0,s.jsxs)("div",{className:"prompt-field",children:[s.jsx(Z,{control:U.control,name:"prompt",formLabel:"remove"===i?"Object to remove":"Object to recolor",className:"w-full",render:({field:e})=>s.jsx(F.I,{value:e.value,className:"input-field",onChange:a=>J("prompt",a.target.value,i,e.onChange)})}),"recolor"===i&&s.jsx(Z,{control:U.control,name:"color",formLabel:"Replacement Color",className:"w-full",render:({field:e})=>s.jsx(F.I,{value:e.value,className:"input-field",onChange:a=>J("color",a.target.value,"recolor",e.onChange)})})]}),(0,s.jsxs)("div",{className:"media-uploader-field",children:[s.jsx(Z,{control:U.control,name:"publicId",className:"flex size-full flex-col",render:({field:e})=>s.jsx(V,{onValueChange:e.onChange,setImage:x,publicId:e.value,image:m,type:i})}),s.jsx(P.default,{image:m,type:i,title:U.getValues().title,isTransforming:R,setIsTransforming:k,transformationConfig:S})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[s.jsx(N.z,{type:"button",className:"submit-button capitalize",disabled:R||null===g,onClick:M,children:R?"Transforming...":"Apply Transformation"}),s.jsx(N.z,{type:"submit",className:"submit-button capitalize",disabled:y,children:y?"Submitting...":"Save Image"})]})]})})}},63413:(e,a,t)=>{"use strict";t.d(a,{default:()=>d});var s=t(10326),r=t(77863),l=t(3870),i=t(46226);t(17577);let d=({image:e,type:a,title:t,transformationConfig:d,isTransforming:o,setIsTransforming:n,hasDownload:c=!1})=>(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex-between",children:[s.jsx("h3",{className:"h3-bold text-dark-600",children:"Transformed"}),c&&s.jsx("button",{className:"download-btn",onClick:a=>{a.preventDefault(),(0,r.LR)((0,l.oy)({width:e?.width,height:e?.height,src:e?.publicId,...d}),t)},children:s.jsx(i.default,{src:"/assets/icons/download.svg",alt:"Download",width:24,height:24,className:"pb-[6px]"})})]}),e?.publicId&&d?(0,s.jsxs)("div",{className:"relative",children:[s.jsx(l.bz,{width:(0,r.Ad)(a,e,"width"),height:(0,r.Ad)(a,e,"height"),src:e?.publicId,alt:e.title,sizes:"(max-width: 767px) 100vw, 50vw",placeholder:r.c8,className:"transformed-image",onLoad:()=>{n&&n(!1)},onError:()=>{(0,r.Ds)(()=>{n&&n(!1)},8e3)()},...d}),o&&(0,s.jsxs)("div",{className:"transforming-loader",children:[s.jsx(i.default,{src:"/assets/icons/spinner.svg",width:50,height:50,alt:"spinner"}),s.jsx("p",{className:"text-white/80",children:"Please wait..."})]})]}):s.jsx("div",{className:"transformed-placeholder",children:"Transformed Image"})]})},99440:(e,a,t)=>{"use strict";t.d(a,{OL:()=>g,_T:()=>f,aR:()=>o,f$:()=>h,fY:()=>p,le:()=>b,vW:()=>n,xo:()=>u,yT:()=>x});var s=t(10326),r=t(17577),l=t(80440),i=t(77863),d=t(90772);let o=l.fC,n=l.xz,c=l.h_,m=r.forwardRef(({className:e,...a},t)=>s.jsx(l.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:t}));m.displayName=l.aV.displayName;let f=r.forwardRef(({className:e,...a},t)=>(0,s.jsxs)(c,{children:[s.jsx(m,{}),s.jsx(l.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));f.displayName=l.VY.displayName;let p=({className:e,...a})=>s.jsx("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});p.displayName="AlertDialogHeader";let u=({className:e,...a})=>s.jsx("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});u.displayName="AlertDialogFooter";let h=r.forwardRef(({className:e,...a},t)=>s.jsx(l.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold",e),...a}));h.displayName=l.Dx.displayName;let x=r.forwardRef(({className:e,...a},t)=>s.jsx(l.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));x.displayName=l.dk.displayName;let g=r.forwardRef(({className:e,...a},t)=>s.jsx(l.aU,{ref:t,className:(0,i.cn)((0,d.d)(),e),...a}));g.displayName=l.aU.displayName;let b=r.forwardRef(({className:e,...a},t)=>s.jsx(l.$j,{ref:t,className:(0,i.cn)((0,d.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));b.displayName=l.$j.displayName},54432:(e,a,t)=>{"use strict";t.d(a,{I:()=>i});var s=t(10326),r=t(17577),l=t(77863);let i=r.forwardRef(({className:e,type:a,...t},r)=>s.jsx("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));i.displayName="Input"},32728:(e,a,t)=>{"use strict";t.d(a,{ao:()=>i,gO:()=>l,mN:()=>r}),t(15424);var s=t(46242);(0,s.$)("5bde9f216a7cdc6f58cb07f53e83b3e1738d68ea");var r=(0,s.$)("78171ba2a30bc64fa482625bc3575e35f9b7eca2"),l=(0,s.$)("0513dc1fa89a5a46cde460b345d3342f9b446570"),i=(0,s.$)("50467022347929ec652df885771661f8ce0b69cc");(0,s.$)("f6aa02c24d3e44009875e580eeee780816c3a94a"),(0,s.$)("c2dc3af0312e83d3bbe5d4a259d4a503bdfc8574")},46276:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});var s=t(19510);t(71159);let r=({title:e,subtitle:a})=>(0,s.jsxs)(s.Fragment,{children:[s.jsx("h2",{className:"h2-bold text-dark-600",children:e}),a&&s.jsx("p",{className:"p-16-regular mt-4",children:a})]})},64396:(e,a,t)=>{"use strict";t.d(a,{ZP:()=>d});var s=t(68570);let r=(0,s.createProxy)(String.raw`C:\Users\admin\Desktop\imaginify\components\shared\TransformationForm.tsx`),{__esModule:l,$$typeof:i}=r;r.default,(0,s.createProxy)(String.raw`C:\Users\admin\Desktop\imaginify\components\shared\TransformationForm.tsx#formSchema`);let d=(0,s.createProxy)(String.raw`C:\Users\admin\Desktop\imaginify\components\shared\TransformationForm.tsx#default`)},23149:(e,a,t)=>{"use strict";t.r(a),t.d(a,{createUser:()=>o,deleteUser:()=>m,getUserById:()=>n,updateCredits:()=>f,updateUser:()=>c});var s=t(24330);t(60166);var r=t(57708),l=t(29258),i=t(18879),d=t(50650);async function o(e){try{await (0,i.v)();let a=await l.Z.create(e);return JSON.parse(JSON.stringify(a))}catch(e){(0,d.S3)(e)}}async function n(e){try{await (0,i.v)();let a=await l.Z.findOne({clerkId:e});if(!a)throw Error("User not found");return JSON.parse(JSON.stringify(a))}catch(e){(0,d.S3)(e)}}async function c(e,a){try{await (0,i.v)();let t=await l.Z.findOneAndUpdate({clerkId:e},a,{new:!0});if(!t)throw Error("User update failed");return JSON.parse(JSON.stringify(t))}catch(e){(0,d.S3)(e)}}async function m(e){try{await (0,i.v)();let a=await l.Z.findOne({clerkId:e});if(!a)throw Error("User not found");let t=await l.Z.findByIdAndDelete(a._id);return(0,r.revalidatePath)("/"),t?JSON.parse(JSON.stringify(t)):null}catch(e){(0,d.S3)(e)}}async function f(e,a){try{await (0,i.v)();let t=await l.Z.findOneAndUpdate({_id:e},{$inc:{creditBalance:a}},{new:!0});if(!t)throw Error("User credits update failed");return JSON.parse(JSON.stringify(t))}catch(e){(0,d.S3)(e)}}(0,t(40618).h)([o,n,c,m,f]),(0,s.j)("15b7832004d701c5edee6144e0c0c9d9747cc984",o),(0,s.j)("2bfdc0e17c58ceb98c26f4cd1b2677c7816e8b39",n),(0,s.j)("1d575876d1821b9744f489231b3e5c1c6be08015",c),(0,s.j)("6211d5ae95a8c8bbe21c848c64603161c69b5fa8",m),(0,s.j)("b2a90d281b61f0fd63dfa5008fbcac295a6ae37e",f)}};