exports.id=529,exports.ids=[529],exports.modules={67243:(e,a,t)=>{let i={"0306281f5cf137461319ce7861d8d005fbc9ad41":()=>Promise.resolve().then(t.bind(t,3479)).then(e=>e.invalidateCacheAction)};async function r(e,...a){return(await i[e]()).apply(null,a)}e.exports={"0306281f5cf137461319ce7861d8d005fbc9ad41":r.bind(null,"0306281f5cf137461319ce7861d8d005fbc9ad41")}},11728:(e,a,t)=>{"use strict";t.d(a,{Collection:()=>v});var i=t(10326),r=t(46226),s=t(90434),l=t(35047),n=t(3870),c=t(17577),d=t(62881);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),u=(0,d.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);(0,d.Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var f=t(77863),m=t(90772);let p=({className:e,...a})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:(0,f.cn)("mx-auto flex w-full justify-center",e),...a});p.displayName="Pagination";let h=c.forwardRef(({className:e,...a},t)=>i.jsx("ul",{ref:t,className:(0,f.cn)("flex flex-row items-center gap-1",e),...a}));h.displayName="PaginationContent",c.forwardRef(({className:e,...a},t)=>i.jsx("li",{ref:t,className:(0,f.cn)("",e),...a})).displayName="PaginationItem";let g=({className:e,isActive:a,size:t="icon",...r})=>i.jsx("a",{"aria-current":a?"page":void 0,className:(0,f.cn)((0,m.d)({variant:a?"outline":"ghost",size:t}),e),...r});g.displayName="PaginationLink";let x=({className:e,...a})=>(0,i.jsxs)(g,{"aria-label":"Go to previous page",size:"default",className:(0,f.cn)("gap-1 pl-2.5",e),...a,children:[i.jsx(o,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});x.displayName="PaginationPrevious";let y=({className:e,...a})=>(0,i.jsxs)(g,{"aria-label":"Go to next page",size:"default",className:(0,f.cn)("gap-1 pr-2.5",e),...a,children:[i.jsx("span",{children:"Next"}),i.jsx(u,{className:"h-4 w-4"})]});y.displayName="PaginationNext";var b=t(58464),N=t(54432);let w=()=>{let e=(0,l.useRouter)(),a=(0,l.useSearchParams)(),[t,s]=(0,c.useState)("");return(0,c.useEffect)(()=>{let i=setTimeout(()=>{if(t){let i=(0,f.Yz)({searchParams:a.toString(),key:"query",value:t});e.push(i,{scroll:!1})}else{let t=(0,f.yj)({searchParams:a.toString(),keysToRemove:["query"]});e.push(t,{scroll:!1})}},300);return()=>clearTimeout(i)},[e,a,t]),(0,i.jsxs)("div",{className:"search",children:[i.jsx(r.default,{src:"/assets/icons/search.svg",alt:"search",width:24,height:24}),i.jsx(N.I,{className:"search-field",placeholder:"Search",onChange:e=>s(e.target.value)})]})},v=({hasSearch:e=!1,images:a,totalPages:t=1,page:r})=>{let s=(0,l.useRouter)(),n=(0,l.useSearchParams)(),c=e=>{let a="next"===e?Number(r)+1:Number(r)-1,t=(0,f.Yz)({searchParams:n.toString(),key:"page",value:a});s.push(t,{scroll:!1})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"collection-heading",children:[i.jsx("h2",{className:"h2-bold text-dark-600",children:"Recent Edits"}),e&&i.jsx(w,{})]}),a.length>0?i.jsx("ul",{className:"collection-list",children:a.map(e=>i.jsx(j,{image:e},e.author._id))}):i.jsx("div",{className:"collection-empty",children:i.jsx("p",{className:"p-20-semibold",children:"Empty List"})}),t>1&&i.jsx(p,{className:"mt-10",children:(0,i.jsxs)(h,{className:"flex w-full",children:[i.jsx(m.z,{disabled:1>=Number(r),className:"collection-btn",onClick:()=>c("prev"),children:i.jsx(x,{className:"hover:bg-transparent hover:text-white"})}),(0,i.jsxs)("p",{className:"flex-center p-16-medium w-fit flex-1",children:[r," / ",t]}),i.jsx(m.z,{className:"button w-32 bg-purple-gradient bg-cover text-white",onClick:()=>c("next"),disabled:Number(r)>=t,children:i.jsx(y,{className:"hover:bg-transparent hover:text-white"})})]})})]})},j=({image:e})=>i.jsx("li",{children:(0,i.jsxs)(s.default,{href:`/transformations/${e._id}`,className:"collection-card",children:[i.jsx(n.bz,{src:e.publicId,alt:e.title,width:e.width,height:e.height,...e.config,loading:"lazy",className:"h-52 w-full rounded-[10px] object-cover",sizes:"(max-width: 767px) 100vw, (max-width: 1279px) 50vw, 33vw"}),(0,i.jsxs)("div",{className:"flex-between",children:[i.jsx("p",{className:"p-20-semibold mr-3 line-clamp-1 text-dark-600",children:e.title}),i.jsx(r.default,{src:`/assets/icons/${b.vB[e.transformationType].icon}`,alt:e.title,width:24,height:24})]})]})})},54432:(e,a,t)=>{"use strict";t.d(a,{I:()=>l});var i=t(10326),r=t(17577),s=t(77863);let l=r.forwardRef(({className:e,type:a,...t},r)=>i.jsx("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));l.displayName="Input"},62453:(e,a,t)=>{"use strict";t.d(a,{F:()=>n});var i=t(68570);let r=(0,i.createProxy)(String.raw`C:\Users\admin\Desktop\imaginify\components\shared\Collection.tsx`),{__esModule:s,$$typeof:l}=r;r.default;let n=(0,i.createProxy)(String.raw`C:\Users\admin\Desktop\imaginify\components\shared\Collection.tsx#Collection`)},61627:(e,a,t)=>{"use strict";t.r(a),t.d(a,{addImage:()=>h,deleteImage:()=>x,getAllImages:()=>b,getImageById:()=>y,getUserImages:()=>N,updateImage:()=>g});var i=t(24330);t(60166);var r=t(57708),s=t(18879),l=t(50650),n=t(29258),c=t(11185);let d=new c.Schema({title:{type:String,required:!0},transformationType:{type:String,required:!0},publicId:{type:String,required:!0},secureURL:{type:String,required:!0},width:{type:Number},height:{type:Number},config:{type:Object},transformationUrl:{type:String},aspectRatio:{type:String},color:{type:String},prompt:{type:String},author:{type:c.Schema.Types.ObjectId,ref:"User"},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}}),o=c.models?.Image||(0,c.model)("Image",d);var u=t(58585),f=t(49788),m=t(40618);let p=e=>e.populate({path:"author",model:n.Z,select:"_id firstName lastName clerkId"});async function h({image:e,userId:a,path:t}){try{await (0,s.v)();let i=await n.Z.findById(a);if(!i)throw Error("User not found");let l=await o.create({...e,author:i._id});return(0,r.revalidatePath)(t),JSON.parse(JSON.stringify(l))}catch(e){(0,l.S3)(e)}}async function g({image:e,userId:a,path:t}){try{await (0,s.v)();let i=await o.findById(e._id);if(!i||i.author.toHexString()!==a)throw Error("Unauthorized or image not found");let l=await o.findByIdAndUpdate(i._id,e,{new:!0});return(0,r.revalidatePath)(t),JSON.parse(JSON.stringify(l))}catch(e){(0,l.S3)(e)}}async function x(e){try{await (0,s.v)(),await o.findByIdAndDelete(e)}catch(e){(0,l.S3)(e)}finally{(0,u.redirect)("/")}}async function y(e){try{await (0,s.v)();let a=await p(o.findById(e));if(!a)throw Error("Image not found");return JSON.parse(JSON.stringify(a))}catch(e){(0,l.S3)(e)}}async function b({limit:e=9,page:a=1,searchQuery:t=""}){try{await (0,s.v)(),f.v2.config({cloud_name:"dk8currrj",api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET,secure:!0});let i="folder=imaginify";t&&(i+=` AND ${t}`);let{resources:r}=await f.v2.search.expression(i).execute(),l=r.map(e=>e.public_id),n={};t&&(n={publicId:{$in:l}});let c=(Number(a)-1)*e,d=await p(o.find(n)).sort({updatedAt:-1}).skip(c).limit(e),u=await o.find(n).countDocuments(),m=await o.find().countDocuments();return{data:JSON.parse(JSON.stringify(d)),totalPage:Math.ceil(u/e),savedImages:m}}catch(e){(0,l.S3)(e)}}async function N({limit:e=9,page:a=1,userId:t}){try{await (0,s.v)();let i=(Number(a)-1)*e,r=await p(o.find({author:t})).sort({updatedAt:-1}).skip(i).limit(e),l=await o.find({author:t}).countDocuments();return{data:JSON.parse(JSON.stringify(r)),totalPages:Math.ceil(l/e)}}catch(e){(0,l.S3)(e)}}(0,m.h)([h,g,x,y,b,N]),(0,i.j)("78171ba2a30bc64fa482625bc3575e35f9b7eca2",h),(0,i.j)("0513dc1fa89a5a46cde460b345d3342f9b446570",g),(0,i.j)("50467022347929ec652df885771661f8ce0b69cc",x),(0,i.j)("f6aa02c24d3e44009875e580eeee780816c3a94a",y),(0,i.j)("c2dc3af0312e83d3bbe5d4a259d4a503bdfc8574",b),(0,i.j)("5bde9f216a7cdc6f58cb07f53e83b3e1738d68ea",N)}};